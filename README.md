# 🤖 GitHub Trends Email Notifier
[![Weekly GitHub Trends Email](https://github.com/israahch/github-trends-notifier/actions/workflows/weekly_notifier.yml/badge.svg)](https://github.com/israahch/github-trends-notifier/actions)


Automatically fetch, analyze, and email the latest GitHub trending repositories — weekly or on-demand — with historical data stored in PostgreSQL.

---

## 🚀 Overview
**GitHub Trends Reporter** is a fully automated pipeline that:

- Fetches trending repositories from the GitHub API
- Stores historical trend data in a PostgreSQL database
- Analyzes top languages, organizations, and topics
- Generates structured JSON and HTML summaries
- Sends formatted email reports automatically
- Supports weekly scheduled runs via GitHub Actions or manual runs
- Accepts custom topics and repository count via CLI or config

---

 ## 🚀 Features
- 🔍 Fetches top trending repositories with configurable topic and top_n
- 🗄️ Stores trend history in PostgreSQL for tracking changes over time
- 📊 Processes trends and generates analysis (current vs previous data)
- ✉️ Sends weekly HTML email reports using secure credentials from GitHub Secrets
- ⏰ Fully automated GitHub Actions workflow
- 🛠️ Flexible CLI options for manual or dynamic runs

---

## ⚙️ How It Works
Database Initialization: Creates tables in PostgreSQL if they don’t exist.

1. **Fetching:** Collects trending repositories using GitHub’s REST API.
2. **Processing:** Analyzes repository statistics and compares with previous data from the database.
3. **Notifying:** Sends a clean HTML email report using SMTP.
4. **Automation:** Runs automatically weekly via GitHub Actions or manually using CLI arguments.
5. **Logging:** Logs stored in logs/ folder; uploaded as artifacts in GitHub Actions.

---

## 🧰 Tech Stack
- Python (requests, pandas, SQLAlchemy, smtplib)
- GitHub REST API
- PostgreSQL (history & trend storage)
- Email Automation (SMTP)
- GitHub Actions (CI/CD scheduling)

---

## 🧠 Project Architecture
Here’s an example of the automated weekly email summary generated by the pipeline:

<p align="center">
  <img src="assets/email_summary_1.png" alt="GitHub Trends Email Example 1" width="600">
</p>

<p align="center">
  <img src="assets/email_summary_2.png" alt="GitHub Trends Email Example 2" width="600">
</p>

> _These emails are automatically generated by the GitHub Actions workflow every week._

---

## 🗂️ File Structure
```
├── .git/ 🚫 (auto-hidden)
├── .github/
│   └── workflows/
│       └── github_trends.yml
├── .vscode/ 🚫 (auto-hidden)
├── assets/
│   ├── email_summary_1.png
│   └── email_summary_2.png
├── logs/ 🚫 (auto-hidden)
├── outputs/
│   ├── analysis_machine_learning_2025_10_19.json
│   └── analysis_machine_learning_2025_10_20.json
├── src/
│   ├── db/
│   │   ├── database.py
│   │   ├── models.py
│   │   └── repo_db.py
│   ├── fetcher/
│   │   ├── fetching_pipline.py
│   │   └── github_api.py
│   ├── notifier/
│   │   ├── email_notifier.py
│   │   ├── find_file.py
│   │   ├── notifying_pipline.py
│   │   └── templates.py
│   ├── processor/
│   │   ├── analyze_trends.py
│   │   ├── processing_pipline.py
│   │   └── storage.py
│   └── utils/
│       └── logger.py
├── .gitignore
├── README.md
├── config.py
├── main.py
└── requirements.txt
```

---

## ▶️ Usage
1. Clone the repo  
```bash
git clone https://github.com/yourname/github-trends-notifier.git
```
2. Install dependencies
```bash
pip install -r requirements.txt
```
3. Create a `.env` file with your email credentials:
```bash
# Use an app password, NOT your Gmail login password
EMAIL_USER=youremail@gmail.com
EMAIL_PASS=your_app_password
EMAIL_TO=recipient@example.com
```

4. Set up PostgreSQL 

- Install PostgreSQL locally or use a server.
- Create a database (example: `github_trends`):
```sql
CREATE DATABASE github_trends;
```
- Update DATABASE_URL in config.py:
```bash
# Local PostgreSQL without password
DATABASE_URL = "postgresql://macmini@localhost/github_trends"

# If you create a role with password
DATABASE_URL = "postgresql://username:password@localhost/github_trends"
```
### ⚠️ Notes
- The script automatically handles table creation (`github_repos`) in PostgreSQL.
- Re-running the script does **not** recreate tables or delete existing data.
- Make sure PostgreSQL is running before executing `main.py`.


5. Run the main script to fetch trends, process data, and send email:

```bash
# Use defaults from config
python main.py

# Specify a topic and number of repos
python main.py --topic "artificial intelligence" --top_n 150
```

---

## 🔮 Future Improvements
- Add charts to the email summary (matplotlib)
- Support multiple GitHub topics
- Store trend history in a database
- Build a simple dashboard (Streamlit or Flask)

---

## 🙌 Credits
**Created by:** Israa Hch  
📧 **Contact:** issrach235@gmail.com  
🌐 **GitHub:** [github.com/israahch](https://github.com/israahch)

---

## ⭐ Contributing & Support

If you like this project, consider giving it a ⭐ on GitHub!
Contributions and improvements are always welcome 😊